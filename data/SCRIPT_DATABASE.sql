-- H2 2.3.232; 
;              
CREATE USER IF NOT EXISTS "SA" SALT '3edb2e23aa45d472' HASH '5300c33beabf002c45eb54b035e4129faceddf066d86df827e171520d83f3d42' ADMIN;          
CREATE CACHED TABLE "PUBLIC"."CLIENTE"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "CPF" CHARACTER VARYING(255),
    "EMAIL" CHARACTER VARYING(255) NOT NULL,
    "IS_DELETED" BOOLEAN NOT NULL,
    "NOME" CHARACTER VARYING(255) NOT NULL,
    "SENHA" CHARACTER VARYING(255) NOT NULL
);  
ALTER TABLE "PUBLIC"."CLIENTE" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_5" PRIMARY KEY("ID");       
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.CLIENTE;  
CREATE CACHED TABLE "PUBLIC"."EMPRESTIMOS"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "DATA_EMPRESTIMO" DATE,
    "IS_DELETED" BOOLEAN NOT NULL,
    "VALOR_CALCULADO" FLOAT(53),
    "VALOR_POR_DIA" FLOAT(53),
    "PRAZO_DEVOLUCAO" DATE,
    "STATUS" TINYINT,
    "CLIENTE_ID" BIGINT,
    "LIVRO_ID" BIGINT
);        
ALTER TABLE "PUBLIC"."EMPRESTIMOS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_BB" PRIMARY KEY("ID");  
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.EMPRESTIMOS;              
CREATE CACHED TABLE "PUBLIC"."LIVRO"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "AUTOR" CHARACTER VARYING(255),
    "AVALIACAO" FLOAT(53),
    "EXEMPLARES_DISPONIVEIS_EM_ESTOQUE" INTEGER,
    "GENERO" CHARACTER VARYING(255),
    "IS_DELETED" BOOLEAN NOT NULL,
    "ISBN" CHARACTER VARYING(255),
    "NUMERO_PAGINAS" INTEGER,
    "SINOPSE" CHARACTER VARYING(255),
    "TITULO" CHARACTER VARYING(255),
    "TOTAL_AVALIACOES" INTEGER
);           
ALTER TABLE "PUBLIC"."LIVRO" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_4" PRIMARY KEY("ID");         
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.LIVRO;    
ALTER TABLE "PUBLIC"."EMPRESTIMOS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_B" CHECK("STATUS" BETWEEN 0 AND 2) NOCHECK;             
ALTER TABLE "PUBLIC"."LIVRO" ADD CONSTRAINT "PUBLIC"."UK6FOHGMULPPBOM2ONE085C0A1V" UNIQUE NULLS DISTINCT ("TITULO");           
ALTER TABLE "PUBLIC"."CLIENTE" ADD CONSTRAINT "PUBLIC"."UKR1U8010D60NUM5VC8FP0Q1J2A" UNIQUE NULLS DISTINCT ("CPF");            
ALTER TABLE "PUBLIC"."CLIENTE" ADD CONSTRAINT "PUBLIC"."UKCMXO70M08N43599L3H0H07CC6" UNIQUE NULLS DISTINCT ("EMAIL");          
ALTER TABLE "PUBLIC"."LIVRO" ADD CONSTRAINT "PUBLIC"."UKK8SI93WTSLP275PV65GITY1GG" UNIQUE NULLS DISTINCT ("ISBN");             
ALTER TABLE "PUBLIC"."EMPRESTIMOS" ADD CONSTRAINT "PUBLIC"."FKRWO5D11YLV7P6F1QLRM7E1JA9" FOREIGN KEY("CLIENTE_ID") REFERENCES "PUBLIC"."CLIENTE"("ID") NOCHECK;
ALTER TABLE "PUBLIC"."EMPRESTIMOS" ADD CONSTRAINT "PUBLIC"."FKPYTPWOO4XY8LCNWYEURRKMEMG" FOREIGN KEY("LIVRO_ID") REFERENCES "PUBLIC"."LIVRO"("ID") NOCHECK;    
